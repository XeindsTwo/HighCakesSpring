<!DOCTYPE html>
<html lang="ru" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HighCakes | Каталог</title>
    <link rel="icon" th:href="@{/images/icons/favicon.svg}" type="images/x-icon">
    <link rel="shortcut icon" th:href="@{/images/icons/favicon.svg}" type="images/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

</head>

<body class="body">
<header class="header">
    <div class="container">
        <nav class="header__nav">
            <ul class="header__menu">
                <li class="header__item">
                    <a class="header__link header__link--active" th:href="@{/}">Главная</a>
                </li>
                <li class="header__item">
                    <a class="header__link" th:href="@{/about}">О компании</a>
                </li>
                <li class="header__item">
                    <a class="header__link" th:href="@{/catalog}">Каталог</a>
                </li>
                <li class="header__item">
                    <a class="header__link" th:href="@{/offer}">Заказать торт</a>
                </li>
                <li class="header__item">
                    <a class="header__link" th:href="@{/unique}">Индивидуальный заказ</a>
                </li>
                <li class="header__item">
                    <a class="header__link" th:href="@{/news}">Новости</a>
                </li>
                <li class="header__item">
                    <a class="header__link" th:href="@{/help}">Помощь</a>
                </li>
                <li class="header__item">
                    <a class="header__link" th:href="@{/shipping}">Доставка и оплата</a>
                </li>
                <li class="header__item">
                    <a class="header__link" th:href="@{/reviews}">Отзывы</a>
                </li>
                <li class="header__item" sec:authorize="hasAuthority('Администратор')">
                    <a class="header__link" th:href="@{/users}">Пользователи</a>
                </li>
                <li class="header__item" sec:authorize="hasAuthority('Администратор')">
                    <a class="header__link" th:href="@{/manual}">Администрирование</a>
                </li>
            </ul>
        </nav>
        <div class="header__inner">
            <button class="menu-btn">
                <span class="menu-btn__line"></span>
                <span class="menu-btn__line"></span>
                <span class="menu-btn__line"></span>
            </button>
            <a class="logo" th:href="@{/}">
                <img class="logo__img" th:src="@{/images/icons/logo.svg}" alt="логотип" width="215" height="54">
            </a>
            <div class="header__cabinet" sec:authorize="not isAuthenticated()">
                <a class="header__cabinet-link" th:href="@{/login}">Войти</a>
            </div>
            <div class="header__cabinet" sec:authorize="isAuthenticated()">
                <a class="header__cabinet-link" th:href="@{/profile}">Личный кабинет</a>
            </div>
        </div>
    </div>
</header>
<main>
    <section class="catalog indent">
        <div class="container">
            <h1 class="page-title page-title--indent">Наш каталог тортиков</h1>
            <form class="catalog__search" action="">
                <label for="search-cake">
                    <input type="text" class="catalog__field" id="search-cake" placeholder="Введите текст">
                </label>
            </form>
            <button class="catalog__btn" onclick="modal_addCake()" sec:authorize="hasAuthority('Администратор')">Добавить товар</button>
            <ul class="catalog__list">
                <th:block th:if="${cakes.isEmpty()}">
                    <p>Тортов нет, создайте их</p>
                </th:block>
                <th:block th:each="cake: ${cakes}">
                    <li class="catalog__item">
                        <div class="card">
                            <ul class="card__admin" sec:authorize="hasAuthority('Администратор')">
                                <li class="card__admin-item" onclick="modal_EditCake(event)">
                                    <button class="card__admin-btn" id="button-open-edit_cake"
                                            th:data-cake-id="${cake.id}"
                                            th:data-cake-name="${cake.name}"
                                            th:data-cake-price="${cake.price}"
                                            th:data-cake-description="${cake.description}"
                                            th:data-cake-composition="${cake.composition}"
                                            th:data-cake-calories="${cake.calories}"
                                            th:data-cake-weight="${cake.weight}"
                                            th:data-cake-protein="${cake.protein}"
                                            th:data-cake-fat="${cake.fat}"
                                            th:data-cake-carbohydrates="${cake.carbohydrates}"
                                            th:data-cake-shelfLife="${cake.shelfLife}"
                                            th:data-cake-filename="${cake.filename}"
                                    >
                                        <svg class="table__svg" width="22" height="22" viewBox="0 0 22 22" fill="none"
                                             xmlns="http://www.w3.org/2000/svg">
                                            <path d="M17 9L13 5M1.5 20.5L4.88437 20.124C5.29786 20.078 5.5046 20.055 5.69785 19.9925C5.86929 19.937 6.03245 19.8586 6.18289 19.7594C6.35245 19.6475 6.49955 19.5005 6.79373 19.2063L20 6C21.1046 4.89543 21.1046 3.10457 20 2C18.8955 0.895428 17.1046 0.895427 16 2L2.79373 15.2063C2.49955 15.5005 2.35246 15.6475 2.24064 15.8171C2.14143 15.9676 2.06301 16.1307 2.00751 16.3022C1.94496 16.4954 1.92198 16.7021 1.87604 17.1156L1.5 20.5Z"
                                                  stroke="#fff" stroke-width="2" stroke-linecap="round"
                                                  stroke-linejoin="round"></path>
                                        </svg>
                                    </button>
                                </li>
                                <li class="card__admin-item" onclick="modal_DeleteCake(event)">
                                    <button class="card__admin-btn" id="button-open-delete_cake"
                                            th:data-cake-id="${cake.id}" th:data-cake-name="${cake.name}">
                                        <svg class="table__svg" width="20" height="20" viewBox="0 0 20 20" fill="none"
                                             xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 1H13M1 4H19M17 4L16.2987 14.5193C16.1935 16.0975 16.1409 16.8867 15.8 17.485C15.4999 18.0118 15.0472 18.4353 14.5017 18.6997C13.882 19 13.0911 19 11.5093 19H8.49065C6.90891 19 6.11803 19 5.49834 18.6997C4.95276 18.4353 4.50009 18.0118 4.19998 17.485C3.85911 16.8867 3.8065 16.0975 3.70129 14.5193L3 4M8 8.5V13.5M12 8.5V13.5"
                                                  stroke="#fff" stroke-width="2" stroke-linecap="round"
                                                  stroke-linejoin="round"></path>
                                        </svg>
                                    </button>
                                </li>
                            </ul>
                            <img class="card__img" th:src="@{'/uploads/' + ${cake.filename}}" alt="" width="315"
                                 height="340">
                            <div class="card__info">
                                <h3 class="card__name" th:text="${cake.name}"></h3>
                                <ul class="card__list">
                                    <li th:text="'Вес - ' + ${cake.weight} + ' г.'"></li>
                                    <li th:text="'Цена - ' + ${cake.price} + '₽'"></li>
                                    <li th:text="'Калорийность - ' + ${cake.calories} + ' кКал'"></li>
                                </ul>
                                <a class="card__link" th:href="@{/cake/{id}/details(id=${cake.id})}" target="_blank">Узнать
                                    подробнее</a>
                            </div>
                        </div>
                    </li>
                </th:block>
            </ul>
        </div>
    </section>
    <section class="unique indent">
        <div class="container">
            <h2 class="section-title">Индивидуальный заказ</h2>
            <div class="unique__info">
                <div class="unique__content">
                    <h3 class="unique__title">
                        Сделайте ваше событие по-настоящему особенным с индивидуальным заказом
                    </h3>
                    <div class="unique__content-text">
                        <p>
                            В нашей кондитерской мы предлагаем вам уникальную возможность заказать индивидуальные
                            десерты,
                            созданные специально для особых событий в вашей жизни. Мы полностью погружаемся в ваше
                            видение и
                            работаем над каждой деталью, чтобы сделать ваше событие по-настоящему незабываемым
                        </p>
                        <p>
                            Наша команда профессиональных кондитеров с радостью примет вызов создания индивидуального
                            десерта, отвечающего вашим пожеланиям и предпочтениям. Мы готовы обсудить различные варианты
                            дизайна, форм, вкусовых сочетаний и текстур, чтобы создать десерт, который отражает вашу
                            уникальность и стиль
                        </p>
                        <p>
                            При сотрудничестве с нами, вы можете ожидать индивидуального подхода и внимания к каждой
                            детали
                            вашего заказа. Мы с удовольствием поможем вам выбрать оптимальный размер, форму и оформление
                            десерта, чтобы он идеально вписывался в тематику вашего события
                        </p>
                        <p class="unique__application">
                            Заполнить заявку можно на <a th:href="@{/unique}">нашей странице</a>
                        </p>
                        <p class="unique__price">Начальная цена индивидуального заказа - 8000₽</p>
                    </div>
                </div>
                <img class="unique__img" src="images/unique.png" alt="" width="540" height="675">
            </div>
            <ul class="unique__steps">
                <li class="unique__step">
                    <h4 class="unique__name">#1 - начало</h4>
                    <p class="unique__description">Вы отправляете заявку на нашем сайте по созданию уникального
                        торта</p>
                </li>
                <li class="unique__step">
                    <h4 class="unique__name">#2 - обсуждение заказа</h4>
                    <p class="unique__description">В дальнейшем мы с вами свяжемся чтобы обсудить детали заказа</p>
                </li>
                <li class="unique__step">
                    <h4 class="unique__name">#3 - изготовление заказа</h4>
                    <p class="unique__description">Мы изготавливаем ваш заказ и в дальнейшем вы его забираете к себе</p>
                </li>
            </ul>
        </div>
    </section>
    <section class="contacts indent">
        <div class="container">
            <h2 class="section-title">Контакты</h2>
            <div class="contacts__content">
                <ul class="contacts__info">
                    <li class="contacts__item">
                        <span class="contacts__name">Номер телефона: </span>
                        <a class="contacts__link" href="tel:+79181682137">+7 (918) 168-21-37</a>
                    </li>
                    <li class="contacts__item">
                        <span class="contacts__name">Адрес:</span>
                        <a class="contacts__link" href="https://goo.gl/maps/Y2k9eTwXRcEDa1b58" target="_blank">ул.
                            Ленина, 177/1</a>
                    </li>
                    <li class="contacts__item">
                        <span class="contacts__name">График работы:</span>
                        <div class="contacts__work">Ежедневно с 8:00 до 21:00</div>
                    </li>
                </ul>
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2832.8472924953485!2d39.868705!3d44.763529!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x40f0c5e81e9266f7%3A0x8d4de1ab4064a308!2z0YPQuy4g0JvQtdC90LjQvdCwLCAxMjcsINCR0LXQu9C-0YDQtdGH0LXQvdGB0LosINCa0YDQsNGB0L3QvtC00LDRgNGB0LrQuNC5INC60YDQsNC5LCAzNTI2MzA!5e0!3m2!1sru!2sru!4v1685602248272!5m2!1sru!2sru"
                        width="860" height="440" style="border:0;" allowfullscreen="" loading="lazy"
                        referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </div>
    </section>
</main>
<footer class="footer">
    <div class="footer__top">
        <div class="container">
            <nav class="footer__nav">
                <ul class="footer__list">
                    <li class="footer__item">
                        <a th:href="@{/}" class="footer__link">Главная</a>
                    </li>
                    <li class="footer__item">
                        <a th:href="@{/about}" class="footer__link">О компании</a>
                    </li>
                    <li class="footer__item">
                        <a th:href="@{/catalog}" class="footer__link">Каталог</a>
                    </li>
                    <li class="footer__item">
                        <a th:href="@{/news}" class="footer__link">Новости</a>
                    </li>
                    <li class="footer__item">
                        <a th:href="@{/reviews}" class="footer__link">Отзывы</a>
                    </li>
                    <li class="footer__item">
                        <a th:href="@{/unique}" class="footer__link">Заказать торт</a>
                    </li>
                    <li class="footer__item">
                        <a th:href="@{/shipping}" class="footer__link">Доставка и оплата</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <p class="footer__author">© Все права защищены HighCakes</p>
</footer>
<div class="modal" sec:authorize="hasAuthority('Администратор')" id="modal-edit_cake">
    <button class="modal__close" onclick="modal_cakeClose()">
        <svg width="22" height="22" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.99998 8.99998L1 1" stroke="white" stroke-width="1" stroke-linecap="round"
                  stroke-linejoin="round"/>
            <path d="M9.00002 1L1 9.00002" stroke="white" stroke-width="1" stroke-linecap="round"
                  stroke-linejoin="round"/>
        </svg>
    </button>
    <h2 class="section-title" id="edit_modal__title">Добавление торта</h2>
    <form class="modal__form" enctype="multipart/form-data">
        <ul class="modal__list">
            <li class="modal__item">
                <label class="label" for="name">Название</label>
                <input class="input" type="text" id="name" name="name" placeholder="Введите название">
                <span class="error">
                    Название не должно содержать цифры. Минимальное количество символов - 3, максимальное - 50
                </span>
            </li>
            <li class="modal__item">
                <label class="label" for="price">Цена в ₽</label>
                <input class="input" type="number" id="price" name="price" placeholder="Введите цену">
                <span class="error">Минимальная цена - 500, максимальная - 50000</span>
            </li>
            <li class="modal__item">
                <label class="label" for="description">Описание торта</label>
                <textarea class="input textarea" id="description" name="description"
                          placeholder="Введите текст"></textarea>
                <span class="error">Описание не может быть пустым и коротким. Мин. количество символов - 100</span>
            </li>
            <li class="modal__item">
                <label class="label" for="composition">Состав торта</label>
                <textarea class="input textarea" id="composition" name="composition"
                          placeholder="Введите текст"></textarea>
                <span class="error">Состав не может быть пустым и коротким. Мин. количество символов - 70</span>
            </li>
            <li class="modal__item">
                <label class="label" for="calories">Количество калорий (Ккал)</label>
                <input class="input" type="number" id="calories" name="calories"
                       placeholder="Введите количество">
                <span class="error">Калорий не может быть меньше 300, и не больше 30000</span>
            </li>
            <li class="modal__item">
                <label class="label" for="weight">Вес (граммы)</label>
                <input class="input" type="number" id="weight" name="weight" placeholder="Введите вес">
                <span class="error">Вес не может быть меньше 150, и не больше 20000</span>
            </li>
            <li class="modal__item">
                <label class="label" for="protein">Количество белков (граммы)</label>
                <input class="input" type="number" id="protein" name="protein"
                       placeholder="Введите количество">
                <span class="error">Белки не могут быть меньше 3, и не больше 600</span>
            </li>
            <li class="modal__item">
                <label class="label" for="fats">Количество жиров (граммы)</label>
                <input class="input" type="number" id="fats" name="fats" placeholder="Введите количество">
                <span class="error">Жиров не может быть меньше 3, и не больше 600</span>
            </li>
            <li class="modal__item">
                <label class="label" for="carbs">Количество углеводов (граммы)</label>
                <input class="input" type="number" id="carbs" name="carbs" placeholder="Введите количество">
                <span class="error">Углеводов не может быть меньше 3, и не больше 600</span>
            </li>
            <li class="modal__item">
                <label class="label" for="shelfLife">Срок хранения (в днях)</label>
                <input class="input" type="number" id="shelfLife" name="shelfLife"
                       placeholder="Введите количество">
                <span class="error">Количество дней не должно быть меньше 1, и не больше 30</span>
            </li>
            <li class="modal__item">
                <span class="label">Фотография</span>
                <div class="file-upload-container">
                    <input type="file" id="photo" name="photo" onchange="updateFileName(event)">
                    <label class="custom-file-upload" for="photo" id="file-upload-label">
                        Загрузить файл
                    </label>
                </div>
            </li>
        </ul>
        <div class="modal__buttons">
            <button class="modal__btn" type="button" onclick="modal_cakeClose()">Отменить</button>
            <button class="modal__btn" type="button" onclick="modal_saveCake()">Сохранить</button>
        </div>
    </form>
</div>
<div class="modal modal--delete" sec:authorize="hasAuthority('Администратор')" id="modal-delete_cake">
    <button class="modal__close" onclick="modal_DeleteCakeClose()">
        <svg width="22" height="22" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.99998 8.99998L1 1" stroke="white" stroke-width="1" stroke-linecap="round"
                  stroke-linejoin="round"/>
            <path d="M9.00002 1L1 9.00002" stroke="white" stroke-width="1" stroke-linecap="round"
                  stroke-linejoin="round"/>
        </svg>
    </button>
    <div class="modal__inner">
        <p class="modal__text">
            Вы действительно хотите удалить "<span id="cake_name-delete"></span>?" Отменить это действие будет
            невозможно.
        </p>
        <form class="modal__form-actions" action="">
            <div class="modal__buttons">
                <button class="modal__btn" type="button" id="button-delete_cake" onclick="deleteCake()">Удалить</button>
                <button class="modal__btn" type="button" id="button-cancel_cake" onclick="modal_DeleteCakeClose()">
                    Отмена
                </button>
            </div>
        </form>
    </div>
</div>
<script th:src="@{/js/main.min.js}"></script>
<script th:src="@{/js/catalog.js}"></script>
<script th:src="@{/js/functions/search.js}"></script>
<script>
    setupSearchFromSearchJS('#search-cake', '.catalog__list', '/catalog');
</script>
<script th:src="@{/js/custom-file.js}"></script>
</body>

</html>